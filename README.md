# API2Log — Инструмент для работы с API и отправки логов

## Описание
`API2Log` — это веб-приложение на **Streamlit**, предназначенное для:
- Отправки HTTP-запросов к REST API.
- Обработки ответов и извлечения логов.
- Фильтрации новых записей по `ID`, `timestamp` или пользовательскому полю.
- Отправки логов через TCP-сокет.
- Автоматического опроса (polling) с заданным интервалом.

Инструмент удобен для тестирования API, мониторинга логов и интеграции с системами сбора логов SIEM.

> [!IMPORTANT]  
> В текущей реализации скрипта необходимо, чтобы вкладка браузера была открыта для постоянного сбора.

## Основные функции

### 1. **HTTP-запросы**
Поддерживает методы: `GET`, `POST`, `PUT`, `DELETE`.  
Способы аутентификации:
- Bearer Token
- Basic Auth
- Client Certificate

Можно указывать заголовки и тело запроса в формате JSON.

### 2. **Обработка логов**
Позволяет фильтровать и отправлять только новые логи, сортировка и отслеживание (файл состояния: `log_state.json`) по:
- По ID
- По timestamp
- По пользовательскому полю, возможность задать (например, `lastSeen`)

Логи хранятся в состоянии между запросами и обновляются после каждого успешного получения новых записей.

### 3. **Отправка логов через TCP**
Функция отправляет отфильтрованные логи через TCP-сокет на указанный хост и порт.

### 4. **Автополлинг**
Возможность автоматического выполнения последовательности:
1. Запрос к API
2. Извлечение новых логов
3. Отправка логов по TCP

Интервал опроса задаётся пользователем.

## Установка

```bash
pip install -r requirements.txt
```

## Запуск

```cmd
streamlit run getLogAPI_GUI.py
```

или

```bash
/usr/bin/python3.12 -m streamlit run getLogAPI_GUI.py --server.fileWatcherType=none
```

Запуск на определенном порту

```bash
/usr/bin/python3.12 -m streamlit run getLogAPI_GUI.py --server.fileWatcherType=none --server.port=8080 
```

Запуск на определенном порту и адресе

```bash
/usr/bin/python3.12 -m streamlit run getLogAPI_GUI.py --server.fileWatcherType=none --server.address=0.0.0.0 --server.port=8080 
```

## Требования
- Python 3.12+
- Библиотеки: `streamlit`, `requests`, `socket`
- Совместимость: Windows, Linux, macOS

## Возможности UI
- Темная/светлая тема оформления
- Визуализация ответа API (JSON / RAW text)
- Скачивание данных по запросу
- Логирование всех событий в файл `logfile.txt` (пишется рядом с python файлом)

## Demo (GIF долго грузится)
![KUMA_getLogAPI_GUI_GIF](https://github.com/user-attachments/assets/4ba8cb38-54aa-4021-81c6-1ee9dcabe3d3)

## **Дальнейшее развитие**
- Сохранение профиля сбора в файл, чтобы не держать вкладку открытой
- Создание профилей сбора для нескольких источников на одной странице
